const grab={targetElement:null,callback:null,method:null,url:null,async:!0,xhr:new XMLHttpRequest,headers:null,enableCors:!1,perform:function(t,e,s,r){return this.method=t,this.url=e,this.async=s,this.xhr=new XMLHttpRequest,this.cors(void 0!==r?r:this.enableCors),this},cors:function(t){return this.xhr.withCredentials=t,this},here:function(t,e){return this.targetElement=document.getElementById(t),this.callback=e,this},setHeaders:function(t){return this.headers=t,this},setData:function(t){return this.data=t,this},error:function(t){return this.xhr.onerror=t,this},timeout:function(t,e){return this.xhr.timeout=t,this.xhr.ontimeout=e,this},progress:function(t){return this.xhr.onprogress=t,this},responseType:function(t){return this.xhr.responseType=t,this},abort:function(){return this.xhr.abort(),console.log("Request aborted."),this},cache:function(t){return this.xhr.setRequestHeader("Cache-Control",t),this},done:function(){const t=this;if(this.xhr.onload=function(){t.handleResponse()},this.xhr.open(this.method,this.url,this.async),this.xhr.withCredentials?console.log("CORS is enabled."):console.log("CORS is disabled."),this.headers)for(var[e,s]of Object.entries(this.headers))this.xhr.setRequestHeader(e,s);"POST"!==this.method.toUpperCase()||this.headers&&this.headers["Content-type"]?this.xhr.send(this.data):console.error("Content type is not specified for POST request.")},handleResponse:function(){var t=this.xhr.response;if(this.targetElement)if("function"==typeof this.callback)this.callback.call(this.targetElement,t);else if("all"===this.callback)this.targetElement.innerHTML=t;else if("header"===this.callback&&this.headers)for(var[e,s]of Object.entries(this.headers)){s=this.xhr.getResponseHeader(s);this.targetElement.innerHTML+=e+`: ${s||"Header not found"}<br>`}}};window.grab=grab;